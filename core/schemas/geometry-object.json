{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://beta.schemas.opengis.net/json-fg/geometry-object.json",
  "title": "the geometry objects",
  "description": "This JSON Schema is part of JSON-FG version 0.3.0",
  "type": "object",
  "oneOf": [
    {
      "$ref": "#/$defs/Point"
    },
    {
      "$ref": "#/$defs/MultiPoint"
    },
    {
      "$ref": "#/$defs/LineString"
    },
    {
      "$ref": "#/$defs/MultiLineString"
    },
    {
      "$ref": "#/$defs/Polygon"
    },
    {
      "$ref": "#/$defs/MultiPolygon"
    },
    {
      "$ref": "#/$defs/Polyhedron"
    },
    {
      "$ref": "#/$defs/MultiPolyhedron"
    },
    {
      "$ref": "#/$defs/Prism"
    },
    {
      "$ref": "#/$defs/MultiPrism"
    },
    {
      "$ref": "#/$defs/CircularString"
    },
    {
      "$ref": "#/$defs/CompoundCurve"
    },
    {
      "$ref": "#/$defs/CurvePolygon"
    },
    {
      "$ref": "#/$defs/MultiCurve"
    },
    {
      "$ref": "#/$defs/MultiSurface"
    },
    {
      "$ref": "#/$defs/CustomGeometry"
    }
  ],
  "$defs": {
    "CustomGeometry": {
      "title": "A custom geometry object",
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "not": {
            "enum": [
              "Point",
              "MultiPoint",
              "LineString",
              "MultiLineString",
              "Polygon",
              "MultiPolygon",
              "Polyhedron",
              "MultiPolyhedron",
              "Prism",
              "MultiPrism",
              "CircularString",
              "CompoundCurve",
              "CurvePolygon",
              "MultiCurve",
              "MultiSurface",
              "GeometryCollection"
            ]
          }
        }
      }
    },
    "CustomCurve": {
      "title": "A custom curve object",
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "not": {
            "enum": [
              "LineString",
              "CircularString"
            ]
          }
        }
      }
    },
    "CustomSurface": {
      "title": "A custom surface object",
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "not": {
            "enum": [
              "Polygon",
              "CurvePolygon"
            ]
          }
        }
      }
    },
    "Point": {
      "title": "GeoJSON Point with additional 'coordRefSys' member",
      "type": "object",
      "required": ["type", "coordinates"],
      "properties": {
        "type": {
          "const": "Point"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "coordinates": {
          "$ref": "#/$defs/position"
        },
        "bbox": {
          "$ref": "#/$defs/bbox"
        }
      }
    },
    "LineString": {
      "title": "GeoJSON LineString with additional 'coordRefSys' member",
      "type": "object",
      "required": ["type", "coordinates"],
      "properties": {
        "type": {
          "const": "LineString"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "coordinates": {
          "type": "array",
          "minItems": 2,
          "items": {
            "$ref": "#/$defs/position"
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox"
        }
      }
    },
    "Polygon": {
      "title": "GeoJSON Polygon with additional 'coordRefSys' member",
      "type": "object",
      "required": ["type", "coordinates"],
      "properties": {
        "type": {
          "const": "Polygon"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "coordinates": {
          "type": "array",
          "items": {
            "type": "array",
            "minItems": 4,
            "items": {
              "$ref": "#/$defs/position"
            }
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox"
        }
      }
    },
    "MultiPoint": {
      "title": "GeoJSON MultiPoint with additional 'coordRefSys' member",
      "type": "object",
      "required": ["type", "coordinates"],
      "properties": {
        "type": {
          "const": "MultiPoint"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "coordinates": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/position"
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox"
        }
      }
    },
    "MultiLineString": {
      "title": "GeoJSON MultiLineString with additional 'coordRefSys' member",
      "type": "object",
      "required": ["type", "coordinates"],
      "properties": {
        "type": {
          "const": "MultiLineString"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "coordinates": {
          "type": "array",
          "items": {
            "type": "array",
            "minItems": 2,
            "items": {
              "$ref": "#/$defs/position"
            }
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox"
        }
      }
    },
    "MultiPolygon": {
      "title": "GeoJSON MultiPolygon with additional 'coordRefSys' member",
      "type": "object",
      "required": ["type", "coordinates"],
      "properties": {
        "type": {
          "const": "MultiPolygon"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "coordinates": {
          "type": "array",
          "items": {
            "type": "array",
            "items": {
              "type": "array",
              "minItems": 4,
              "items": {
                "$ref": "#/$defs/position"
              }
            }
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox"
        }
      }
    },
    "GeometryCollection": {
      "title": "GeoJSON GeometryCollection with additional 'coordRefSys' member",
      "type": "object",
      "required": ["type", "geometries"],
      "properties": {
        "type": {
          "const": "GeometryCollection"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "geometries": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/$defs/Point"
              },
              {
                "$ref": "#/$defs/MultiPoint"
              },
              {
                "$ref": "#/$defs/LineString"
              },
              {
                "$ref": "#/$defs/MultiLineString"
              },
              {
                "$ref": "#/$defs/Polygon"
              },
              {
                "$ref": "#/$defs/MultiPolygon"
              }
            ]
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox"
        }
      }
    },
    "Polyhedron": {
      "title": "JSON-FG Polyhedron",
      "type": "object",
      "required": ["type", "coordinates"],
      "properties": {
        "type": {
          "const": "Polyhedron"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "coordinates": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "array",
              "minItems": 1,
              "items": {
                "type": "array",
                "minItems": 4,
                "items": {
                  "$ref": "#/$defs/position3d"
                }
              }
            }
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox3d"
        }
      }
    },
    "MultiPolyhedron": {
      "title": "JSON-FG MultiPolyhedron",
      "type": "object",
      "required": ["type", "coordinates"],
      "properties": {
        "type": {
          "const": "MultiPolyhedron"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "coordinates": {
          "type": "array",
          "items": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "array",
              "minItems": 1,
              "items": {
                "type": "array",
                "minItems": 1,
                "items": {
                  "type": "array",
                  "minItems": 4,
                  "items": {
                    "$ref": "#/$defs/position3d"
                  }
                }
              }
            }
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox3d"
        }
      }
    },
    "Prism": {
      "title": "JSON-FG Prism",
      "type": "object",
      "required": ["type","base","upper"],
      "properties": {
        "type": {
          "const": "Prism"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "base": {
          "oneOf": [
            { "$ref": "#/$defs/Point" },
            { "$ref": "#/$defs/LineString" },
            { "$ref": "#/$defs/Polygon" },
            { "$ref": "#/$defs/MultiPoint" },
            { "$ref": "#/$defs/MultiLineString" },
            { "$ref": "#/$defs/MultiPolygon" }
          ]
        },
        "lower": {
          "type": "number"
        },
        "upper": {
          "type": "number"
        },
        "bbox": {
          "$ref": "#/$defs/bbox3d"
        }
      }
    },
    "MultiPrism": {
      "title": "JSON-FG Multi-Prism",
      "type": "object",
      "required": ["type","prisms"],
      "properties": {
        "type": {
          "const": "MultiPrism"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "prisms": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Prism"
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox3d"
        }
      }
    },
    "CircularString": {
      "title": "JSON-FG CircularString",
      "type": "object",
      "required": ["type", "coordinates"],
      "properties": {
        "type": {
          "const": "CircularString"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "coordinates": {
          "type": "array",
          "oneOf": [
            {"minItems": 3, "maxItems": 3},
            {"minItems": 5, "maxItems": 5},
            {"minItems": 7, "maxItems": 7},
            {"minItems": 9, "maxItems": 9},
            {"minItems": 11, "maxItems": 11}
          ],
          "items": {
            "$ref": "#/$defs/position"
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox"
        }
      }
    },
    "CompoundCurve": {
      "title": "JSON-FG CompoundCurve",
      "type": "object",
      "required": ["type", "geometries"],
      "properties": {
        "type": {
          "const": "CompoundCurve"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "geometries": {
          "type": "array",
          "minItems": 1,
          "items": {
            "oneOf": [
              {
                "$ref": "#/$defs/LineString"
              },
              {
                "$ref": "#/$defs/CircularString"
              },
              {
                "$ref": "#/$defs/CustomCurve"
              }
            ]
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox"
        }
      }
    },
    "CurvePolygon": {
      "title": "JSON-FG CurvePolygon",
      "type": "object",
      "required": ["type", "geometries"],
      "properties": {
        "type": {
          "const": "CurvePolygon"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "geometries": {
          "type": "array",
          "minItems": 1,
          "items": {
            "oneOf": [
              {
                "$ref": "#/$defs/CompoundCurve"
              },
              {
                "$ref": "#/$defs/LineString"
              },
              {
                "$ref": "#/$defs/CircularString"
              },
              {
                "$ref": "#/$defs/CustomCurve"
              }
            ]
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox"
        }
      }
    },
    "MultiCurve": {
      "title": "JSON-FG MultiCurve",
      "type": "object",
      "required": ["type", "geometries"],
      "properties": {
        "type": {
          "const": "MultiCurve"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "geometries": {
          "type": "array",
          "minItems": 1,
          "items": {
            "oneOf": [
              {
                "$ref": "#/$defs/CompoundCurve"
              },
              {
                "$ref": "#/$defs/LineString"
              },
              {
                "$ref": "#/$defs/CircularString"
              },
              {
                "$ref": "#/$defs/CustomCurve"
              }
            ]
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox"
        }
      }
    },
    "MultiSurface": {
      "title": "JSON-FG MultiSurface",
      "type": "object",
      "required": ["type", "geometries"],
      "properties": {
        "type": {
          "const": "MultiSurface"
        },
        "conformsTo": {
          "$ref": "conformsto.json"
        },
        "coordRefSys": {
          "$ref": "coordrefsys.json"
        },
        "measures": {
          "$ref": "measures.json"
        },
        "geometries": {
          "type": "array",
          "minItems": 1,
          "items": {
            "oneOf": [
              {
                "$ref": "#/$defs/CurvePolygon"
              },
              {
                "$ref": "#/$defs/Polygon"
              },
              {
                "$ref": "#/$defs/CustomSurface"
              }
            ]
          }
        },
        "bbox": {
          "$ref": "#/$defs/bbox"
        }
      }
    },
    "position": {
      "type": "array",
      "minItems": 2,
      "maxItems": 4,
      "items": {
        "type": "number"
      }
    },
    "position3d": {
      "type": "array",
      "minItems": 3,
      "maxItems": 4,
      "items": {
        "type": "number"
      }
    },
    "bbox": {
      "oneOf": [
        {
          "$ref": "#/$defs/bbox2d"
        },
        {
          "$ref": "#/$defs/bbox3d"
        }
      ]
    },
    "bbox2d": {
      "type": "array",
      "minItems": 4,
      "maxItems": 4,
      "items": {
        "type": "number"
      }
    },
    "bbox3d": {
      "type": "array",
      "minItems": 6,
      "maxItems": 6,
      "items": {
        "type": "number"
      }
    }
  }
}
